<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mythfall Loot Tracker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>ðŸ§­ Mythfall Loot Tracker</h1>
    <p>View dungeon drops and static drop rates â€” always available, even when the bot is offline.</p>
  </header>

  <main>
    <section id="dungeons">
      <!-- Dungeon sections will be inserted here -->
    </section>
  </main>

  <footer>
    <p>Built by Arpee for the Mythfall community</p>
  </footer>

  <script>
    const lootData = {
      "Necromancer's Garden": [/* ... */],
      "Chamber of the Awakened": [/* ... */],
      "Volcanic Core": [/* ... */],
      "Succubus Lair": [/* ... */],
      "Volcanic Mines": [/* ... */],
      "The Hanging Temple": [/* ... */],
      "Grug Pit": [/* ... */],
      "Scorpion Pit": [/* ... */],
      "Temple of Anubis": [/* ... */],
      "Alivarg's Tower": [/* ... */],
      "Gorthan's Labyrinth": [/* ... */],
      "Ancient Ruins": [/* ... */],
      "Lorendel's Garden": [/* ... */],
      "Goopy Grove": [/* ... */],
      "Stoneheart Forest": [/* ... */],
      "Eldertree Thicket": [/* ... */],
      "Luminous Cavern": [/* ... */],
      "Coolcrab Grotto": [/* ... */],
      "Pirate Cove": [
        "Cutlass",
        "Blunderbuss",
        "Captain's Hat",
        "Gunpowder Egg",
        "Captain's Cape",
        "Pirate Diary (Pg 1)",
        "Pirate Diary (Pg 2)"
      ]
    };

    fetch('data/piratecove.json')
      .then(response => response.json())
      .catch(() => ({})) // fallback if file missing or invalid
      .then(pirateStats => {
        const container = document.getElementById("dungeons");

        for (const [dungeon, drops] of Object.entries(lootData).reverse()) {
          const section = document.createElement("section");
          section.className = "dungeon";

          const title = document.createElement("h2");
          title.textContent = dungeon;
          section.appendChild(title);

          const list = document.createElement("ul");
          drops.forEach(drop => {
            let rate = "5%";
            if (drop.toLowerCase().includes("egg")) rate = "3%";
            if (drop.toLowerCase().includes("pg")) rate = "2%";

            let statText = "";
            if (dungeon === "Pirate Cove" && pirateStats[drop]) {
              const { count, rate: actualRate } = pirateStats[drop];
              statText = ` | Logged: ${count} (${actualRate}%)`;
            }

            list.innerHTML += `<li>${drop} <span class="rate">â€” ${rate}${statText}</span></li>`;
          });

          section.appendChild(list);
          container.appendChild(section);
        }
      });
  </script>
</body>
</html>
